var LetDooJS={};(function(){LetDooJS.System=function(g){var j=["Router","Routing-App","Process","Controller","Render","HandlingDOM","XMLHttpRequest-Components","Listenner","Mustache-Lib"];var c=document.head,n="http://",f="web",h=g,m=[],a=[];n=d();LetDooJS.System.prototype.loadCore=function(o){this.load(j,o)};LetDooJS.System.prototype.load=function(q,s){var r=[];for(var p in q){file=q[p];var o=e(file);if(typeof m[o]["loaded"]=="undefined"){m[o]["loaded"]=false;r.push(o)}}s=(s)?s:function(){};if(r.length>=1){b(r,0,s)}else{s()}};LetDooJS.System.prototype.importCss=function(s,o){var p=(o)?n+"web/css/":n+"letdoojs/css/";for(var q in s){var r=document.createElement("link");r.type="text/css";r.rel="stylesheet";r.href=p+s[q]+".css";c.insertBefore(r,c.firstChild)}};LetDooJS.System.prototype.get=function(o,r,q){k(o);var p=m[o]["namespace"];if(typeof LetDooJS[p][o]=="function"){if(q){return new LetDooJS[p][o](r)}if(a[o]){return a[o]}else{return a[o]=new LetDooJS[p][o](r)}}else{return LetDooJS[p][o]}};LetDooJS.System.prototype.getObject=function(o){k(o);var p=m[o]["namespace"];return LetDooJS[p][o]};LetDooJS.System.prototype.getController=function(o){k(o);var p=m.Controller["namespace"];if(a[o]){return a[o]}else{return a[o]=new LetDooJS[p]["Controller"]()}};LetDooJS.System.prototype.getPath=function(){return n};LetDooJS.System.prototype.getWebPath=function(){var o=n+f;return(o.substr(-1)=="/")?o.slice(0,-1):o};LetDooJS.System.prototype.getEnvironnement=function(){return h};function l(p,q){var o=document.createElement("script");o.src=m[p]["src"];o.addEventListener("load",function(){m[p]["loaded"]=true;if(a.Profiler){a.Profiler.profiler(p)}q()},false);c.appendChild(o);if(a.Profiler){a.Profiler.profiler(p)}}function b(o,p,q){l(o[p],function(){p++;if(o[p]){b(o,p,q)}else{q()}})}function e(p){var o=p.split("-");if(!m[o[0]]){if(!o[1]){o[1]="Core"}m[o[0]]=[];m[o[0]]["namespace"]=o[1][0].toUpperCase()+o[1].substring(1);m[o[0]]["src"]=i(o);if(h=="prod"){if(m[o[0]]["namespace"]!="Lib"){m[o[0]]["loaded"]=true}}}return o[0]}function k(o){if(!m[o]){throw ("Script "+o+" is not imported")}if(!m[o]["loaded"]){throw ("Script "+o+" is not loaded yet")}}function i(o){o[1]=o[1].toLowerCase();if(o[1]=="controller"){return n+"src/controllers/"+o[0]+".js"}if(o[1]=="lib"){return n+"lib/"+o[0]+".js"}return n+"letdoojs/"+o[1]+"/"+o[0]+".js"}function d(){var o=new RegExp("(.*)"+f+"/*");o.test(location.href);return RegExp["$1"]}}})();
(function(){LetDooJS.App={};LetDooJS.Core={};LetDooJS.Controller={};LetDooJS.Components={};LetDooJS.Behaviors={};LetDooJS.Helpers={};LetDooJS.Utils={};LetDooJS.App.Kernel=function(){LetDooJS.System.load(["Config-App","Profiler"],function(){LetDooJS.System.get("Profiler");LetDooJS.System.importCss(LetDooJS.App.Config.css_to_import);LetDooJS.System.importCss(LetDooJS.App.Config.your_css,true)});LetDooJS.System.loadCore(function(){var b=LetDooJS.System.get("Routing");var a=LetDooJS.System.get("Router",b);if(b.HOME){a.launch("HOME")}a.launch()})}})();
LetDooJS.App.Config={css_to_import:["resetCssYui","behaviors"],your_css:["style"]};
LetDooJS.App.Routing={HOME:{process:"home::index"},myFisrtUrl:{pattern:"/acc",process:"home::acc",params:{}},mySecondUrl:{pattern:"/autre",process:"autre::index",params:{}},lol:{pattern:"/tt",process:"LDJ_Dev::index",params:{}}};
(function(){LetDooJS.Core.Controller=function(){a.renderApplied=false;a.prototype.bindController=function(b,c){if(!a.prototype[b]){a.prototype[b]=c}};a.prototype.render=function(b,d){a.renderApplied=true;var c=LetDooJS.System.get("Render");c.displayView(b,d,function(){a.callbackRender()})}};var a=LetDooJS.Core.Controller})();
(function(){LetDooJS.Core.HandlingDOM=function(){var a=document.body,b=LetDooJS.System.get("Listenner");LetDooJS.Core.HandlingDOM.prototype.append=function(e,d,c){c=(c)?" "+c:"";var f=(d)?d:this.create({tag:"div",className:"LDJ-Template"+c});f.innerHTML=e;b.listen(f);a.appendChild(f)};LetDooJS.Core.HandlingDOM.prototype.write=function(c,d){if(!d){d=a}var e=document.createElement("div");e.textContent=c;d.appendChild(e)};LetDooJS.Core.HandlingDOM.prototype.create=function(c){var d=document.createElement(c.tag);if(c.className){d.setAttribute("class",c.className)}return d}}})();
(function(){LetDooJS.Core.Listenner=function(){var b=LetDooJS.System.get("Router");LetDooJS.Core.Listenner.prototype.listen=function(d){items=d.querySelectorAll("[data-route]");for(var c in items){a(items[c])}};function a(c,d){if(c.nodeType!=1){return false}d=(d)?d:"click";c.addEventListener(d,function(f){f.preventDefault();var e=c.getAttribute("data-route");b.launch(e)},false)}}})();
(function(){LetDooJS.Core.Process=function(b){var a=[],e=[];LetDooJS.Core.Process.prototype.runAction=function(f){e.push(f);if(e.length==1){d(f)}};LetDooJS.Core.Controller.callbackRender=function(){e.shift();LetDooJS.Core.Controller.renderApplied=false;if(e[0]){d(e[0])}};function d(h){if(typeof h=="function"){return h()}var g=h.controller[0].toUpperCase()+h.controller.substring(1)+"Controller";if(!a[g]){LetDooJS.System.load([g+"-Controller"],function(){var j=LetDooJS.System.getController(g);j.bindController(g,LetDooJS.Controller[g]);var i=(j[g]["require"])?j[g]["require"]:[];LetDooJS.System.load(i,function(){if(j[g]["init"]){j[g]["init"](j)}c(j,g,h)})});a[g]=true}else{var f=LetDooJS.System.getController(g);c(f,g,h)}}function c(f,i,h){var g=h.action+"Action";if(h.pattern){history.pushState(h,h.controller+"-"+g,LetDooJS.System.getWebPath()+h.pattern)}if(!f[i][g]){throw"Action "+i+"::"+g+" not exist"}f[i][g](f);if(!LetDooJS.Core.Controller.renderApplied){LetDooJS.Core.Controller.callbackRender()}}}})();
(function(){LetDooJS.Core.Profiler=function(){var c=[];var b=new Date().getTime();var a=new Date().getTime();if(LetDooJS.System.getEnvironnement()=="dev"){d()}LetDooJS.Core.Profiler.prototype.log=function(f,e){console.log(f)};LetDooJS.Core.Profiler.prototype.profiler=function(e,f){if(!c[e]){c[e]=[];c[e]["start"]=new Date().getTime();c[e]["end"]=0}else{c[e]["end"]=new Date().getTime()}};LetDooJS.Core.Profiler.prototype.display=function(){var f=LetDooJS.System.get("HandlingDOM");for(var e in c){var g=(c[e]["end"]-c[e]["start"]>0)?c[e]["end"]-c[e]["start"]:0;f.write(e+" Charg√© en "+g+" ms.")}};function d(){localStorage.clear();LetDooJS.System.load(["DevFunctions-Utils"])}}})();
(function(){LetDooJS.Core.Render=function(){const a="LDS_VIEW_";var b=[];LetDooJS.Core.Render.prototype.compileView=function(c,f){var d=localStorage[a+c];if(d){b[c]=Mustache.compile(d);f(b[c])}else{var e=LetDooJS.System.get("XMLHttpRequest");e.getTemplate(c,null,function(g){localStorage[a+c]=g;b[c]=Mustache.compile(g);f(b[c])})}};LetDooJS.Core.Render.prototype.displayView=function(d,f,g){if(!f){f={}}var e=LetDooJS.System.get("HandlingDOM");if(b[d]){var c=b[d](f);e.append(c,null,d);if(g){g()}}else{this.compileView(d,function(i){var h=b[d](f);e.append(h,null,d);if(g){g()}})}}}})();
(function(){LetDooJS.Core.Router=function(g){var a=g;var e=LetDooJS.System.get("Process");window.onpopstate=function(h){var i=h.state;if(i){e.runAction(i)}};function f(){var h=location.href;var i=h.replace(LetDooJS.System.getWebPath(),"");return i}function c(j){for(var h in a){if(a[h].pattern==j){return b(a[h])}}return null}function d(h){return b(a[h])}function b(h){CtrlAct=h.process.split("::");h.controller=CtrlAct[0];h.action=CtrlAct[1];return h}LetDooJS.Core.Router.prototype.launch=function(h){if(typeof h=="function"||typeof h=="object"){return e.runAction(h)}var i=(!h)?c(f()):i=d(h);if(i){e.runAction(i)}else{throw"Route Not Found !"}}}})();
(function(){Node.prototype.contextMenu=function(){const d="LDS_contextMenu";var c=LetDooJS.System.get("HandlingDOM");var a=c.create({tag:"div",className:d});a.style.position="absolute";a.style.display="none";document.body.appendChild(a);this.addEventListener("contextmenu",function(e){e.preventDefault();b();a.style.top=e.clientY+"px";a.style.left=e.clientX+"px";a.style.display="block"},false);a.addEventListener("mousedown",function(e){e.stopPropagation()},false);document.addEventListener("mousedown",function(e){if(e.which==1){a.style.display="none"}},false);function b(){var f=document.querySelectorAll(d);for(var e in f){if(f[e].nodeType==1){f[e].style.display="none"}}}}})();
(function(){LetDooJS.Components.XMLHttpRequest=function(){var a=new XMLHttpRequest();LetDooJS.Components.XMLHttpRequest.prototype.request=function(c,b){a.open("GET",b,true);a.send(null)};LetDooJS.Components.XMLHttpRequest.prototype.getTemplate=function(c,d,e){var b=LetDooJS.System.getPath()+((d)?d:"src")+"/views/"+c+".html";this.request("GET",b);a.onload=function(){if(a.status==200){e(a.responseText)}else{throw"Template "+b+" not found"}}}}})();
function l(a){console.log(a)}function LDJ_clear(){localStorage.clear()}function LDJ_go(b){if(!b){routes=LetDooJS.System.get("Routing");for(var c in routes){console.log(c)}return"Please choose an action."}var a=LetDooJS.System.get("Router");a.launch(b)}function LDJ_Routes(a){routes=LetDooJS.System.get("Routing");return(a)?routes[a]:routes};
(function(){})();
(function(){LetDooJS.Controller.AutreController={indexAction:function(a){console.log("autre");a.render("index",{ok:"Ok!"})}}})();
(function(){LetDooJS.Controller.HomeController={require:["ContextMenu-Behaviors"],indexAction:function(a){console.log("index");a.render("homeTemplate",{ok:"Ok!"})},accAction:function(){console.log("acc")}}})();
(function(){LetDooJS.Controller.LDJ_DevController={indexAction:function(a){console.log("devLDJ")}}})();